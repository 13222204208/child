/*! 
 Build based on gin-vue-admin 
 Time : 1680141068000 */
import{r as e,a,o as l,c as t,d as o,e as r,w as s,h as i,aE as u,a3 as n,J as d,U as p,aC as c,a0 as m,bm as v,j as f,E as b,b as g}from"./index.9fcd1cf4.js";import{E as y}from"./dialog.751eac14.js";import"./overlay.a3adf688.js";/* empty css              */import"./tag.591c2959.js";import{E as h,a as j}from"./select.838f2837.js";import"./scrollbar.aed9ef7e.js";/* empty css               */import{E as _}from"./pagination.08bdb986.js";import{E as w,a as C}from"./table-column.1a5fcc4c.js";import"./checkbox.fecdbd3c.js";/* empty css                */import{E as k,_ as x}from"./index.e6528c1f.js";import{E as V}from"./popover.80fb9c79.js";import{E,a as U}from"./form-item.d732c3ca.js";/* empty css               */import{E as z}from"./date-picker.d984416c.js";import{g as I,d as A,f as D,a as q,c as S,u as B}from"./affirm.b357db91.js";import{f as T,a as K,g as O}from"./format.9eacff27.js";import"./refs.432de9a6.js";import"./index.bb4181cc.js";import"./index.7c6e002b.js";import"./strings.bddfd219.js";import"./isEqual.06eb6a45.js";import"./_Uint8Array.660aa69b.js";import"./_initCloneObject.a1ac0bc9.js";import"./drawer.86ea60c6.js";/* empty css             */import"./common.74916482.js";import"./upload.587a7b60.js";import"./progress.cd19376a.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./warningBar.3173d316.js";import"./dropdown.a2cc243e.js";import"./arrays.6dddb988.js";import"./index.34201737.js";import"./date.34b11046.js";import"./dictionary.888f6128.js";import"./dictionary.3924a9ed.js";import"./sysDictionary.8f2d31b8.js";const R={class:"gva-search-box"},F={class:"gva-table-box"},J={class:"gva-btn-list"},M=o("p",null,"确定要删除吗？",-1),G={style:{"text-align":"right","margin-top":"8px"}},H={class:"gva-pagination"},L=o("br",null,null,-1),N={class:"dialog-footer"},P={name:"Affirm"},Q=Object.assign(P,{setup(P){const Q=e([]),W=e({title:"",icon:"",contents:"",sort:0,status:void 0}),X=e(),Y=e("https://huzhu.cnecip.com/api/");console.log(Y.value);const Z=()=>{X.value.open()},$=e=>{W.value.icon=e},ee=a({title:[{required:!0,message:"",trigger:["input","blur"]}],icon:[{required:!0,message:"",trigger:["input","blur"]}],contents:[{required:!0,message:"",trigger:["input","blur"]}],status:[{required:!0,message:"",trigger:["input","blur"]}]}),ae=e(),le=e(1),te=e(0),oe=e(10),re=e([]),se=e({}),ie=({prop:e,order:a})=>{se.value.sort=e,se.value.order=a,ce()},ue=()=>{se.value={},ce()},ne=()=>{le.value=1,oe.value=10,ce()},de=e=>{oe.value=e,ce()},pe=e=>{le.value=e,ce()},ce=async()=>{const e=await I({page:le.value,pageSize:oe.value,...se.value});0===e.code&&(re.value=e.data.list,te.value=e.data.total,le.value=e.data.page,oe.value=e.data.pageSize)};ce();(async()=>{Q.value=await O("status")})();const me=e([]),ve=e=>{me.value=e},fe=e(!1),be=async()=>{const e=[];if(0===me.value.length)return void f({type:"warning",message:"请选择要删除的数据"});me.value&&me.value.map((a=>{e.push(a.ID)}));0===(await A({ids:e})).code&&(f({type:"success",message:"删除成功"}),re.value.length===e.length&&le.value>1&&le.value--,fe.value=!1,ce())},ge=e(""),ye=async e=>{0===(await q({ID:e.ID})).code&&(f({type:"success",message:"删除成功"}),1===re.value.length&&le.value>1&&le.value--,ce())},he=e(!1),je=()=>{ge.value="create",he.value=!0},_e=()=>{he.value=!1,W.value={title:"",icon:"",contents:"",sort:0,status:void 0}},we=async()=>{var e;null==(e=ae.value)||e.validate((async e=>{if(!e)return;let a;switch(ge.value){case"create":default:a=await S(W.value);break;case"update":a=await B(W.value)}0===a.code&&(f({type:"success",message:"创建/更改成功"}),_e(),ce())}))};return(e,a)=>{const f=z,I=E,A=b,q=U,S=V,B=w,O=k,P=C,ce=_,Ce=g,ke=h,xe=j,Ve=y;return l(),t("div",null,[o("div",R,[r(q,{inline:!0,model:se.value,class:"demo-form-inline",onKeyup:u(ne,["enter"])},{default:s((()=>[r(I,{label:"创建时间"},{default:s((()=>[r(f,{modelValue:se.value.startCreatedAt,"onUpdate:modelValue":a[0]||(a[0]=e=>se.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),i(" — "),r(f,{modelValue:se.value.endCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>se.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),r(I,null,{default:s((()=>[r(A,{type:"primary",icon:"search",onClick:ne},{default:s((()=>[i("查询")])),_:1}),r(A,{icon:"refresh",onClick:ue},{default:s((()=>[i("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),o("div",F,[o("div",J,[r(A,{type:"primary",icon:"plus",onClick:je},{default:s((()=>[i("新增")])),_:1}),r(S,{visible:fe.value,"onUpdate:visible":a[4]||(a[4]=e=>fe.value=e),placement:"top",width:"160"},{reference:s((()=>[r(A,{icon:"delete",style:{"margin-left":"10px"},disabled:!me.value.length,onClick:a[3]||(a[3]=e=>fe.value=!0)},{default:s((()=>[i("删除")])),_:1},8,["disabled"])])),default:s((()=>[M,o("div",G,[r(A,{type:"primary",link:"",onClick:a[2]||(a[2]=e=>fe.value=!1)},{default:s((()=>[i("取消")])),_:1}),r(A,{type:"primary",onClick:be},{default:s((()=>[i("确定")])),_:1})])])),_:1},8,["visible"])]),r(P,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:re.value,"row-key":"ID",onSelectionChange:ve,onSortChange:ie},{default:s((()=>[r(B,{type:"selection",width:"55"}),r(B,{align:"left",label:"日期",width:"180"},{default:s((e=>[i(n(d(T)(e.row.CreatedAt)),1)])),_:1}),r(B,{align:"left",label:"标题",prop:"title",width:"120"}),r(B,{align:"left",label:"图标",prop:"icon",width:"120"},{default:s((e=>[r(O,{style:{width:"50px",height:"50px"},src:Y.value+e.row.icon},null,8,["src"])])),_:1}),r(B,{align:"left",label:"内容",prop:"contents",width:"120"}),r(B,{sortable:"",align:"left",label:"排序",prop:"sort",width:"120"}),r(B,{align:"left",label:"状态",prop:"status",width:"120"},{default:s((e=>[i(n(d(K)(e.row.status,Q.value)),1)])),_:1}),r(B,{align:"left",label:"按钮组"},{default:s((e=>[r(A,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await D({ID:e.ID});ge.value="update",0===a.code&&(W.value=a.data.reaffirm,he.value=!0)})(e.row)},{default:s((()=>[i("变更")])),_:2},1032,["onClick"]),r(A,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void v.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ye(l)}));var l}},{default:s((()=>[i("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",H,[r(ce,{layout:"total, sizes, prev, pager, next, jumper","current-page":le.value,"page-size":oe.value,"page-sizes":[10,30,50,100],total:te.value,onCurrentChange:pe,onSizeChange:de},null,8,["current-page","page-size","total"])])]),r(Ve,{modelValue:he.value,"onUpdate:modelValue":a[9]||(a[9]=e=>he.value=e),"before-close":_e,title:"弹窗操作"},{footer:s((()=>[o("div",N,[r(A,{onClick:_e},{default:s((()=>[i("取 消")])),_:1}),r(A,{type:"primary",onClick:we},{default:s((()=>[i("确 定")])),_:1})])])),default:s((()=>[r(q,{model:W.value,"label-position":"right",ref_key:"elFormRef",ref:ae,rules:ee,"label-width":"80px"},{default:s((()=>[r(I,{label:"标题:",prop:"title"},{default:s((()=>[r(Ce,{modelValue:W.value.title,"onUpdate:modelValue":a[5]||(a[5]=e=>W.value.title=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(I,{label:"图标:",prop:"icon"},{default:s((()=>[r(O,{style:{width:"50px",height:"50px"},src:Y.value+W.value.icon},null,8,["src"]),L,r(A,{type:"primary",onClick:Z},{default:s((()=>[i("选择图片")])),_:1}),r(x,{ref_key:"chooseImgRef",ref:X,onEnterImg:$},null,512)])),_:1}),r(I,{label:"内容:",prop:"contents"},{default:s((()=>[r(Ce,{modelValue:W.value.contents,"onUpdate:modelValue":a[6]||(a[6]=e=>W.value.contents=e),clearable:!0,type:"textarea",placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(I,{label:"排序:",prop:"sort"},{default:s((()=>[r(Ce,{modelValue:W.value.sort,"onUpdate:modelValue":a[7]||(a[7]=e=>W.value.sort=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(I,{label:"状态:",prop:"status"},{default:s((()=>[r(xe,{modelValue:W.value.status,"onUpdate:modelValue":a[8]||(a[8]=e=>W.value.status=e),placeholder:"请选择",style:{width:"100%"},clearable:!1},{default:s((()=>[(l(!0),t(p,null,c(Q.value,((e,a)=>(l(),m(ke,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{Q as default};
