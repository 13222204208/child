/*! 
 Build based on gin-vue-admin 
 Time : 1679909256000 */
import{r as e,a,o as l,c as t,d as o,e as r,w as i,h as s,aE as u,a3 as d,J as n,bm as p,j as c,E as m,b as f}from"./index.61dd0a2d.js";import{E as v}from"./dialog.a2b2142c.js";import"./overlay.533fa516.js";/* empty css              */import{E as b}from"./pagination.7bbc3896.js";import"./tag.3ecd1fed.js";import"./select.31449efc.js";import"./scrollbar.ef9dc6d6.js";/* empty css               */import{E as g,a as y}from"./table-column.720e0d1a.js";import"./checkbox.384d52e9.js";/* empty css                */import{E as h,_ as j}from"./index.5c65e0d6.js";import{E as _}from"./popover.4fe0f5fa.js";import{E as w,a as C}from"./form-item.a3ced827.js";/* empty css               */import{E as k}from"./date-picker.c50427f0.js";import{g as x,d as V,f as E,a as z,c as I,u as U}from"./board.244ce60a.js";import{f as D}from"./format.a3be29dc.js";import"./refs.1f88eb22.js";import"./isEqual.3dfeee36.js";import"./_Uint8Array.0caf8bf8.js";import"./index.cbcb4c8f.js";import"./index.ba9b69da.js";import"./strings.ed5ba909.js";import"./_initCloneObject.e29c0e59.js";import"./drawer.f8ea4ac7.js";/* empty css             */import"./common.95eee561.js";import"./upload.55e3c344.js";import"./progress.d509d1cc.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./warningBar.3ea93790.js";import"./dropdown.70690357.js";import"./arrays.6dddb988.js";import"./index.c624c630.js";import"./date.34b11046.js";import"./dictionary.bf1d62cf.js";import"./dictionary.2f4c7964.js";import"./sysDictionary.20d54a34.js";const A={class:"gva-search-box"},S={class:"gva-table-box"},B={class:"gva-btn-list"},q=o("p",null,"确定要删除吗？",-1),T={style:{"text-align":"right","margin-top":"8px"}},K={class:"gva-pagination"},O=o("br",null,null,-1),R={class:"dialog-footer"},F={name:"Board"},J=Object.assign(F,{setup(F){const J=e({title:"",path:"",icon:"",sort:0}),M=a({title:[{required:!0,message:"",trigger:["input","blur"]}],icon:[{required:!0,message:"",trigger:["input","blur"]}]}),G=e(),H=e(),L=e("https://huzhu.cnecip.com/api/");console.log(L.value);const N=()=>{H.value.open()},P=e=>{J.value.icon=e},Q=e(1),W=e(0),X=e(10),Y=e([]),Z=e({}),$=({prop:e,order:a})=>{Z.value.sort=e,Z.value.order=a,oe()},ee=()=>{Z.value={},oe()},ae=()=>{Q.value=1,X.value=10,oe()},le=e=>{X.value=e,oe()},te=e=>{Q.value=e,oe()},oe=async()=>{const e=await x({page:Q.value,pageSize:X.value,...Z.value});0===e.code&&(Y.value=e.data.list,W.value=e.data.total,Q.value=e.data.page,X.value=e.data.pageSize)};oe();(async()=>{})();const re=e([]),ie=e=>{re.value=e},se=e(!1),ue=async()=>{const e=[];if(0===re.value.length)return void c({type:"warning",message:"请选择要删除的数据"});re.value&&re.value.map((a=>{e.push(a.ID)}));0===(await V({ids:e})).code&&(c({type:"success",message:"删除成功"}),Y.value.length===e.length&&Q.value>1&&Q.value--,se.value=!1,oe())},de=e(""),ne=async e=>{0===(await z({ID:e.ID})).code&&(c({type:"success",message:"删除成功"}),1===Y.value.length&&Q.value>1&&Q.value--,oe())},pe=e(!1),ce=()=>{de.value="create",pe.value=!0},me=()=>{pe.value=!1,J.value={title:"",path:"",icon:"",sort:0}},fe=async()=>{var e;null==(e=G.value)||e.validate((async e=>{if(!e)return;let a;switch(de.value){case"create":default:a=await I(J.value);break;case"update":a=await U(J.value)}0===a.code&&(c({type:"success",message:"创建/更改成功"}),me(),oe())}))};return(e,a)=>{const c=k,x=w,V=m,z=C,I=_,U=g,F=h,oe=y,ve=b,be=f,ge=v;return l(),t("div",null,[o("div",A,[r(z,{inline:!0,model:Z.value,class:"demo-form-inline",onKeyup:u(ae,["enter"])},{default:i((()=>[r(x,{label:"创建时间"},{default:i((()=>[r(c,{modelValue:Z.value.startCreatedAt,"onUpdate:modelValue":a[0]||(a[0]=e=>Z.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),s(" — "),r(c,{modelValue:Z.value.endCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>Z.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),r(x,null,{default:i((()=>[r(V,{type:"primary",icon:"search",onClick:ae},{default:i((()=>[s("查询")])),_:1}),r(V,{icon:"refresh",onClick:ee},{default:i((()=>[s("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),o("div",S,[o("div",B,[r(V,{type:"primary",icon:"plus",onClick:ce},{default:i((()=>[s("新增")])),_:1}),r(I,{visible:se.value,"onUpdate:visible":a[4]||(a[4]=e=>se.value=e),placement:"top",width:"160"},{reference:i((()=>[r(V,{icon:"delete",style:{"margin-left":"10px"},disabled:!re.value.length,onClick:a[3]||(a[3]=e=>se.value=!0)},{default:i((()=>[s("删除")])),_:1},8,["disabled"])])),default:i((()=>[q,o("div",T,[r(V,{type:"primary",link:"",onClick:a[2]||(a[2]=e=>se.value=!1)},{default:i((()=>[s("取消")])),_:1}),r(V,{type:"primary",onClick:ue},{default:i((()=>[s("确定")])),_:1})])])),_:1},8,["visible"])]),r(oe,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:Y.value,"row-key":"ID",onSelectionChange:ie,onSortChange:$},{default:i((()=>[r(U,{type:"selection",width:"55"}),r(U,{align:"left",label:"日期",width:"180"},{default:i((e=>[s(d(n(D)(e.row.CreatedAt)),1)])),_:1}),r(U,{align:"left",label:"标题",prop:"title",width:"120"}),r(U,{align:"left",label:"图片",prop:"icon",width:"180"},{default:i((e=>[r(F,{style:{width:"50px"},src:L.value+e.row.icon},null,8,["src"])])),_:1}),r(U,{align:"left",label:"路径",prop:"path",width:"120"}),r(U,{sortable:"",align:"left",label:"排序",prop:"sort",width:"120"}),r(U,{align:"left",label:"按钮组"},{default:i((e=>[r(V,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await E({ID:e.ID});de.value="update",0===a.code&&(J.value=a.data.reboard,pe.value=!0)})(e.row)},{default:i((()=>[s("变更")])),_:2},1032,["onClick"]),r(V,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void p.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ne(l)}));var l}},{default:i((()=>[s("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",K,[r(ve,{layout:"total, sizes, prev, pager, next, jumper","current-page":Q.value,"page-size":X.value,"page-sizes":[10,30,50,100],total:W.value,onCurrentChange:te,onSizeChange:le},null,8,["current-page","page-size","total"])])]),r(ge,{modelValue:pe.value,"onUpdate:modelValue":a[8]||(a[8]=e=>pe.value=e),"before-close":me,title:"弹窗操作"},{footer:i((()=>[o("div",R,[r(V,{onClick:me},{default:i((()=>[s("取 消")])),_:1}),r(V,{type:"primary",onClick:fe},{default:i((()=>[s("确 定")])),_:1})])])),default:i((()=>[r(z,{model:J.value,"label-position":"right",ref_key:"elFormRef",ref:G,rules:M,"label-width":"80px"},{default:i((()=>[r(x,{label:"标题:",prop:"title"},{default:i((()=>[r(be,{modelValue:J.value.title,"onUpdate:modelValue":a[5]||(a[5]=e=>J.value.title=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(x,{label:"图标:",prop:"icon"},{default:i((()=>[r(F,{style:{width:"50px"},src:L.value+J.value.icon},null,8,["src"]),O,r(V,{type:"primary",onClick:N},{default:i((()=>[s("选择图片")])),_:1}),r(j,{ref_key:"chooseImgRef",ref:H,onEnterImg:P},null,512)])),_:1}),r(x,{label:"路径:",prop:"path"},{default:i((()=>[r(be,{modelValue:J.value.path,"onUpdate:modelValue":a[6]||(a[6]=e=>J.value.path=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(x,{label:"排序:",prop:"sort"},{default:i((()=>[r(be,{modelValue:J.value.sort,"onUpdate:modelValue":a[7]||(a[7]=e=>J.value.sort=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{J as default};
