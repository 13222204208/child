/*! 
 Build based on gin-vue-admin 
 Time : 1679909256000 */
import{aJ as e,r as a,o as t,c as l,e as o,d as r,w as i,h as s,a3 as u,J as d,j as m,E as p,b as c}from"./index.61dd0a2d.js";import{E as n}from"./dialog.a2b2142c.js";import"./overlay.533fa516.js";import{E as f,a as v}from"./form-item.a3ced827.js";/* empty css              */import{E as b}from"./pagination.7bbc3896.js";import"./tag.3ecd1fed.js";import"./select.31449efc.js";import"./scrollbar.ef9dc6d6.js";/* empty css               */import{E as g,a as j}from"./table-column.720e0d1a.js";import"./checkbox.384d52e9.js";/* empty css                */import{E as y}from"./popover.4fe0f5fa.js";/* empty css               */import{W as h}from"./warningBar.3ea93790.js";import{f as w}from"./format.a3be29dc.js";import"./refs.1f88eb22.js";import"./_Uint8Array.0caf8bf8.js";import"./_initCloneObject.e29c0e59.js";import"./isEqual.3dfeee36.js";import"./index.cbcb4c8f.js";import"./index.ba9b69da.js";import"./strings.ed5ba909.js";import"./dropdown.70690357.js";/* empty css             */import"./_plugin-vue_export-helper.cdc0426e.js";import"./date.34b11046.js";import"./dictionary.bf1d62cf.js";import"./dictionary.2f4c7964.js";import"./sysDictionary.20d54a34.js";const _=a=>e({url:"/customer/customer",method:"post",data:a}),k={class:"gva-table-box"},C={class:"gva-btn-list"},V=r("p",null,"确定要删除吗？",-1),D={style:{"text-align":"right","margin-top":"8px"}},x={class:"gva-pagination"},z={class:"dialog-footer"},E={name:"Customer"},I=Object.assign(E,{setup(E){const I=a({customerName:"",customerPhoneData:""}),U=a(1),N=a(0),P=a(10),S=a([]),A=e=>{P.value=e,O()},J=e=>{U.value=e,O()},O=async()=>{const a=await(t={page:U.value,pageSize:P.value},e({url:"/customer/customerList",method:"get",params:t}));var t;0===a.code&&(S.value=a.data.list,N.value=a.data.total,U.value=a.data.page,P.value=a.data.pageSize)};O();const q=a(!1),B=a(""),L=async a=>{const t=await(l={ID:a.ID},e({url:"/customer/customer",method:"get",params:l}));var l;B.value="update",0===t.code&&(I.value=t.data.customer,q.value=!0)},T=()=>{q.value=!1,I.value={customerName:"",customerPhoneData:""}},W=async a=>{a.visible=!1;var t;0===(await(t={ID:a.ID},e({url:"/customer/customer",method:"delete",data:t}))).code&&(m({type:"success",message:"删除成功"}),1===S.value.length&&U.value>1&&U.value--,O())},F=async()=>{let a;switch(B.value){case"create":default:a=await _(I.value);break;case"update":a=await(t=I.value,e({url:"/customer/customer",method:"put",data:t}))}var t;0===a.code&&(T(),O())},G=()=>{B.value="create",q.value=!0};return(e,a)=>{const m=p,_=g,E=y,O=j,B=b,H=c,K=f,M=v,Q=n;return t(),l("div",null,[o(h,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),r("div",k,[r("div",C,[o(m,{type:"primary",icon:"plus",onClick:G},{default:i((()=>[s("新增")])),_:1})]),o(O,{ref:"multipleTable",data:S.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:i((()=>[o(_,{type:"selection",width:"55"}),o(_,{align:"left",label:"接入日期",width:"180"},{default:i((e=>[r("span",null,u(d(w)(e.row.CreatedAt)),1)])),_:1}),o(_,{align:"left",label:"姓名",prop:"customerName",width:"120"}),o(_,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),o(_,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),o(_,{align:"left",label:"按钮组","min-width":"160"},{default:i((e=>[o(m,{type:"primary",link:"",icon:"edit",onClick:a=>L(e.row)},{default:i((()=>[s("变更")])),_:2},1032,["onClick"]),o(E,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:i((()=>[o(m,{type:"primary",link:"",icon:"delete",onClick:a=>e.row.visible=!0},{default:i((()=>[s("删除")])),_:2},1032,["onClick"])])),default:i((()=>[V,r("div",D,[o(m,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:i((()=>[s("取消")])),_:2},1032,["onClick"]),o(m,{type:"primary",onClick:a=>W(e.row)},{default:i((()=>[s("确定")])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),r("div",x,[o(B,{"current-page":U.value,"page-size":P.value,"page-sizes":[10,30,50,100],total:N.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:J,onSizeChange:A},null,8,["current-page","page-size","total"])])]),o(Q,{modelValue:q.value,"onUpdate:modelValue":a[2]||(a[2]=e=>q.value=e),"before-close":T,title:"客户"},{footer:i((()=>[r("div",z,[o(m,{onClick:T},{default:i((()=>[s("取 消")])),_:1}),o(m,{type:"primary",onClick:F},{default:i((()=>[s("确 定")])),_:1})])])),default:i((()=>[o(M,{inline:!0,model:I.value,"label-width":"80px"},{default:i((()=>[o(K,{label:"客户名"},{default:i((()=>[o(H,{modelValue:I.value.customerName,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),o(K,{label:"客户电话"},{default:i((()=>[o(H,{modelValue:I.value.customerPhoneData,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{I as default};
