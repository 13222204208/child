/*! 
 Build based on gin-vue-admin 
 Time : 1680141068000 */
import{r as e,a,o as l,c as t,d as o,e as r,w as u,h as i,aE as d,a3 as s,J as n,bm as p,j as c,E as m,b}from"./index.9fcd1cf4.js";import{E as v}from"./dialog.751eac14.js";import"./overlay.a3adf688.js";/* empty css              */import{E as f}from"./pagination.08bdb986.js";import"./tag.591c2959.js";import"./select.838f2837.js";import"./scrollbar.aed9ef7e.js";/* empty css               */import{E as g,a as y}from"./table-column.1a5fcc4c.js";import"./checkbox.fecdbd3c.js";/* empty css                */import{E as h}from"./popover.80fb9c79.js";import{E as j,a as V}from"./form-item.d732c3ca.js";/* empty css               */import{E as _}from"./date-picker.d984416c.js";import{g as w,d as C,f as k,a as x,c as I,u as U}from"./emergency.6245eb42.js";import{f as E}from"./format.9eacff27.js";import"./refs.432de9a6.js";import"./isEqual.06eb6a45.js";import"./_Uint8Array.660aa69b.js";import"./index.bb4181cc.js";import"./index.7c6e002b.js";import"./strings.bddfd219.js";import"./_initCloneObject.a1ac0bc9.js";import"./dropdown.a2cc243e.js";import"./arrays.6dddb988.js";import"./index.34201737.js";import"./date.34b11046.js";import"./dictionary.888f6128.js";import"./dictionary.3924a9ed.js";import"./sysDictionary.8f2d31b8.js";const T={class:"gva-search-box"},D={class:"gva-table-box"},A={class:"gva-btn-list"},z=o("p",null,"确定要删除吗？",-1),F={style:{"text-align":"right","margin-top":"8px"}},L={class:"gva-pagination"},P={class:"dialog-footer"},q={name:"EmergencyAlert"},S=Object.assign(q,{setup(q){const S=e({lostLocation:"",lostTime:"",longitude:"",latitude:"",babyId:0,contactPerson:"",otherFeatures:"",status:0}),B=a({lostLocation:[{required:!0,message:"",trigger:["input","blur"]}],lostTime:[{required:!0,message:"",trigger:["input","blur"]}],babyId:[{required:!0,message:"",trigger:["input","blur"]}]}),K=e(),M=e(1),O=e(0),J=e(10),R=e([]),G=e({}),H=()=>{G.value={},X()},N=()=>{M.value=1,J.value=10,X()},Q=e=>{J.value=e,X()},W=e=>{M.value=e,X()},X=async()=>{const e=await w({page:M.value,pageSize:J.value,...G.value});0===e.code&&(R.value=e.data.list,O.value=e.data.total,M.value=e.data.page,J.value=e.data.pageSize)};X();(async()=>{})();const Y=e([]),Z=e=>{Y.value=e},$=e(!1),ee=async()=>{const e=[];if(0===Y.value.length)return void c({type:"warning",message:"请选择要删除的数据"});Y.value&&Y.value.map((a=>{e.push(a.ID)}));0===(await C({ids:e})).code&&(c({type:"success",message:"删除成功"}),R.value.length===e.length&&M.value>1&&M.value--,$.value=!1,X())},ae=e(""),le=async e=>{0===(await x({ID:e.ID})).code&&(c({type:"success",message:"删除成功"}),1===R.value.length&&M.value>1&&M.value--,X())},te=e(!1),oe=()=>{ae.value="create",te.value=!0},re=()=>{te.value=!1,S.value={lostLocation:"",lostTime:"",longitude:"",latitude:"",babyId:0,contactPerson:"",otherFeatures:"",status:0}},ue=async()=>{var e;null==(e=K.value)||e.validate((async e=>{if(!e)return;let a;switch(ae.value){case"create":default:a=await I(S.value);break;case"update":a=await U(S.value)}0===a.code&&(c({type:"success",message:"创建/更改成功"}),re(),X())}))};return(e,a)=>{const c=_,w=j,C=m,x=V,I=h,U=g,q=y,X=f,ie=b,de=v;return l(),t("div",null,[o("div",T,[r(x,{inline:!0,model:G.value,class:"demo-form-inline",onKeyup:d(N,["enter"])},{default:u((()=>[r(w,{label:"创建时间"},{default:u((()=>[r(c,{modelValue:G.value.startCreatedAt,"onUpdate:modelValue":a[0]||(a[0]=e=>G.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),i(" — "),r(c,{modelValue:G.value.endCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>G.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),r(w,null,{default:u((()=>[r(C,{type:"primary",icon:"search",onClick:N},{default:u((()=>[i("查询")])),_:1}),r(C,{icon:"refresh",onClick:H},{default:u((()=>[i("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),o("div",D,[o("div",A,[r(C,{type:"primary",icon:"plus",onClick:oe},{default:u((()=>[i("新增")])),_:1}),r(I,{visible:$.value,"onUpdate:visible":a[4]||(a[4]=e=>$.value=e),placement:"top",width:"160"},{reference:u((()=>[r(C,{icon:"delete",style:{"margin-left":"10px"},disabled:!Y.value.length,onClick:a[3]||(a[3]=e=>$.value=!0)},{default:u((()=>[i("删除")])),_:1},8,["disabled"])])),default:u((()=>[z,o("div",F,[r(C,{type:"primary",link:"",onClick:a[2]||(a[2]=e=>$.value=!1)},{default:u((()=>[i("取消")])),_:1}),r(C,{type:"primary",onClick:ee},{default:u((()=>[i("确定")])),_:1})])])),_:1},8,["visible"])]),r(q,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:R.value,"row-key":"ID",onSelectionChange:Z},{default:u((()=>[r(U,{type:"selection",width:"55"}),r(U,{align:"left",label:"日期",width:"180"},{default:u((e=>[i(s(n(E)(e.row.CreatedAt)),1)])),_:1}),r(U,{align:"left",label:"走失位置",prop:"lostLocation",width:"120"}),r(U,{align:"left",label:"走丢时间",prop:"lostTime",width:"120"}),r(U,{align:"left",label:"经度",prop:"longitude",width:"120"}),r(U,{align:"left",label:"纬度",prop:"latitude",width:"120"}),r(U,{align:"left",label:"宝贝ID",prop:"babyId",width:"120"}),r(U,{align:"left",label:"紧急联系人",prop:"contactPerson",width:"120"}),r(U,{align:"left",label:"其它特征",prop:"otherFeatures",width:"120"}),r(U,{align:"left",label:"状态",prop:"status",width:"120"}),r(U,{align:"left",label:"按钮组"},{default:u((e=>[r(C,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await k({ID:e.ID});ae.value="update",0===a.code&&(S.value=a.data.reemergencyAlert,te.value=!0)})(e.row)},{default:u((()=>[i("变更")])),_:2},1032,["onClick"]),r(C,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void p.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{le(l)}));var l}},{default:u((()=>[i("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",L,[r(X,{layout:"total, sizes, prev, pager, next, jumper","current-page":M.value,"page-size":J.value,"page-sizes":[10,30,50,100],total:O.value,onCurrentChange:W,onSizeChange:Q},null,8,["current-page","page-size","total"])])]),r(de,{modelValue:te.value,"onUpdate:modelValue":a[13]||(a[13]=e=>te.value=e),"before-close":re,title:"弹窗操作"},{footer:u((()=>[o("div",P,[r(C,{onClick:re},{default:u((()=>[i("取 消")])),_:1}),r(C,{type:"primary",onClick:ue},{default:u((()=>[i("确 定")])),_:1})])])),default:u((()=>[r(x,{model:S.value,"label-position":"right",ref_key:"elFormRef",ref:K,rules:B,"label-width":"80px"},{default:u((()=>[r(w,{label:"走失位置:",prop:"lostLocation"},{default:u((()=>[r(ie,{modelValue:S.value.lostLocation,"onUpdate:modelValue":a[5]||(a[5]=e=>S.value.lostLocation=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(w,{label:"走丢时间:",prop:"lostTime"},{default:u((()=>[r(ie,{modelValue:S.value.lostTime,"onUpdate:modelValue":a[6]||(a[6]=e=>S.value.lostTime=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(w,{label:"经度:",prop:"longitude"},{default:u((()=>[r(ie,{modelValue:S.value.longitude,"onUpdate:modelValue":a[7]||(a[7]=e=>S.value.longitude=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(w,{label:"纬度:",prop:"latitude"},{default:u((()=>[r(ie,{modelValue:S.value.latitude,"onUpdate:modelValue":a[8]||(a[8]=e=>S.value.latitude=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(w,{label:"宝贝ID:",prop:"babyId"},{default:u((()=>[r(ie,{modelValue:S.value.babyId,"onUpdate:modelValue":a[9]||(a[9]=e=>S.value.babyId=e),modelModifiers:{number:!0},clearable:!1,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(w,{label:"紧急联系人:",prop:"contactPerson"},{default:u((()=>[r(ie,{modelValue:S.value.contactPerson,"onUpdate:modelValue":a[10]||(a[10]=e=>S.value.contactPerson=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(w,{label:"其它特征:",prop:"otherFeatures"},{default:u((()=>[r(ie,{modelValue:S.value.otherFeatures,"onUpdate:modelValue":a[11]||(a[11]=e=>S.value.otherFeatures=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(w,{label:"状态:",prop:"status"},{default:u((()=>[r(ie,{modelValue:S.value.status,"onUpdate:modelValue":a[12]||(a[12]=e=>S.value.status=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{S as default};
