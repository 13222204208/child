/*! 
 Build based on gin-vue-admin 
 Time : 1679909256000 */
import{u as a,r as e,o as t,c as i,d as n,e as o,w as l,h as s,a3 as r,J as c,a0 as d,bm as p,j as u,E as m}from"./index.61dd0a2d.js";import{E as f}from"./pagination.7bbc3896.js";/* empty css              */import"./tag.3ecd1fed.js";import"./select.31449efc.js";import"./scrollbar.ef9dc6d6.js";/* empty css               */import{E as b,a as g}from"./table-column.720e0d1a.js";import"./checkbox.384d52e9.js";/* empty css                *//* empty css               */import{f as y,h as j,r as w}from"./autoCode.3f49bdae.js";import{f as v}from"./format.a3be29dc.js";import{_ as h}from"./_plugin-vue_export-helper.cdc0426e.js";import{E as C}from"./index.ba9b69da.js";import"./isEqual.3dfeee36.js";import"./_Uint8Array.0caf8bf8.js";import"./index.cbcb4c8f.js";import"./strings.ed5ba909.js";import"./_initCloneObject.e29c0e59.js";import"./date.34b11046.js";import"./dictionary.bf1d62cf.js";import"./dictionary.2f4c7964.js";import"./sysDictionary.20d54a34.js";const k={class:"gva-table-box"},x={class:"gva-btn-list"},_={class:"gva-pagination"},T={name:"AutoCodeAdmin"},B=h(Object.assign(T,{setup(h){const T=a(),B=e(1),z=e(0),N=e(10),D=e([]),E=a=>{N.value=a,A()},I=a=>{B.value=a,A()},A=async()=>{const a=await y({page:B.value,pageSize:N.value});0===a.code&&(D.value=a.data.list,z.value=a.data.total,B.value=a.data.page,N.value=a.data.pageSize)};A();const S=async(a,e)=>{e?p.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{p.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{p.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await w({id:Number(a.ID),deleteTable:e})).code&&(u.success("回滚成功"),A())}))}))})):p.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await w({id:Number(a.ID),deleteTable:e})).code&&(u.success("回滚成功"),A())}))},O=a=>{a?T.push({name:"autoCodeEdit",params:{id:a.ID}}):T.push({name:"autoCode"})};return(a,e)=>{const y=m,w=b,h=C,T=g,q=f;return t(),i("div",null,[n("div",k,[n("div",x,[o(y,{type:"primary",icon:"plus",onClick:e[0]||(e[0]=a=>O(null))},{default:l((()=>[s("新增")])),_:1})]),o(T,{data:D.value},{default:l((()=>[o(w,{type:"selection",width:"55"}),o(w,{align:"left",label:"id",width:"60",prop:"ID"}),o(w,{align:"left",label:"日期",width:"180"},{default:l((a=>[s(r(c(v)(a.row.CreatedAt)),1)])),_:1}),o(w,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),o(w,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),o(w,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),o(w,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:l((a=>[a.row.flag?(t(),d(h,{key:0,type:"danger",effect:"dark"},{default:l((()=>[s(" 已回滚 ")])),_:1})):(t(),d(h,{key:1,type:"success",effect:"dark"},{default:l((()=>[s(" 未回滚 ")])),_:1}))])),_:1}),o(w,{align:"left",label:"操作","min-width":"240"},{default:l((a=>[n("div",null,[o(y,{type:"primary",link:"",disabled:1===a.row.flag,onClick:e=>S(a.row,!0)},{default:l((()=>[s("回滚(删表)")])),_:2},1032,["disabled","onClick"]),o(y,{type:"primary",link:"",disabled:1===a.row.flag,onClick:e=>S(a.row,!1)},{default:l((()=>[s("回滚(不删表)")])),_:2},1032,["disabled","onClick"]),o(y,{type:"primary",link:"",onClick:e=>O(a.row)},{default:l((()=>[s("复用")])),_:2},1032,["onClick"]),o(y,{type:"primary",link:"",onClick:e=>(async a=>{p.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await j({id:Number(a.ID)})).code&&(u.success("删除成功"),A())}))})(a.row)},{default:l((()=>[s("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),n("div",_,[o(q,{"current-page":B.value,"page-size":N.value,"page-sizes":[10,30,50,100],total:z.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:I,onSizeChange:E},null,8,["current-page","page-size","total"])])])])}}}),[["__scopeId","data-v-b205a04e"]]);export{B as default};
