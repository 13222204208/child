/*! 
 Build based on gin-vue-admin 
 Time : 1680141068000 */
import{u as a,r as e,a as t,bf as l,b as s,E as r,o as i,c as o,d as n,a3 as d,e as c,w as p,aE as u,g as m,bg as g,a0 as h,f,h as _,bh as v,bi as b,j as y}from"./index.9fcd1cf4.js";import{E as w,a as k}from"./form-item.d732c3ca.js";/* empty css               *//* empty css              */import{c as j}from"./initdb.b9ac4c7d.js";import I from"./bottomInfo.84bbfac5.js";import{_ as L}from"./_plugin-vue_export-helper.cdc0426e.js";import"./_Uint8Array.660aa69b.js";import"./_initCloneObject.a1ac0bc9.js";import"./divider.d5a5c5a6.js";const V=""+new URL("docs.2aa96a87.png",import.meta.url).href,U=""+new URL("kefu.825734dc.png",import.meta.url).href,C=""+new URL("github.b6042bac.png",import.meta.url).href,x=""+new URL("video.24d1e7fa.png",import.meta.url).href,E={id:"userLayout"},N={class:"login_panel"},z={class:"login_panel_form"},R={class:"login_panel_form_title"},A=["src"],P={class:"login_panel_form_title_p"},$={class:"vPicBox"},q={class:"vPic"},D=["src"],G=(a=>(v("data-v-1819488d"),a=a(),b(),a))((()=>n("div",{class:"login_panel_right"},null,-1))),K={class:"login_panel_foot"},M=m('<div class="links" data-v-1819488d><a href="http://doc.henrongyi.top/" target="_blank" data-v-1819488d><img src="'+V+'" class="link-icon" alt="文档" data-v-1819488d></a><a href="https://support.qq.com/product/371961" target="_blank" data-v-1819488d><img src="'+U+'" class="link-icon" alt="客服" data-v-1819488d></a><a href="https://github.com/flipped-aurora/gin-vue-admin" target="_blank" data-v-1819488d><img src="'+C+'" class="link-icon" alt="github" data-v-1819488d></a><a href="https://space.bilibili.com/322210472" target="_blank" data-v-1819488d><img src="'+x+'" class="link-icon" alt="视频站" data-v-1819488d></a></div>',1),O={class:"copyright"},B={name:"Login"},F=L(Object.assign(B,{setup(m){const v=a(),b=()=>{g({}).then((async a=>{C.captcha.push({max:a.data.captchaLength,min:a.data.captchaLength,message:`请输入${a.data.captchaLength}位验证码`,trigger:"blur"}),V.value=a.data.picPath,U.captchaId=a.data.captchaId,U.openCaptcha=a.data.openCaptcha}))};b();const L=e(null),V=e(""),U=t({username:"admin",password:"123456",captcha:"",captchaId:"",openCaptcha:!1}),C=t({username:[{validator:(a,e,t)=>{if(e.length<5)return t(new Error("请输入正确的用户名"));t()},trigger:"blur"}],password:[{validator:(a,e,t)=>{if(e.length<6)return t(new Error("请输入正确的密码"));t()},trigger:"blur"}],captcha:[{message:"验证码格式不正确",trigger:"blur"}]}),x=l(),B=()=>{L.value.validate((async a=>{if(!a)return y({type:"error",message:"请正确填写登录信息",showClose:!0}),b(),!1;await(async()=>await x.LoginIn(U))()||b()}))},F=async()=>{var a;const e=await j();0===e.code&&((null==(a=e.data)?void 0:a.needInit)?(x.NeedInit(),v.push({name:"Init"})):y({type:"info",message:"已配置数据库信息，无法初始化"}))};return(a,e)=>{const t=s,l=w,m=r,g=k;return i(),o("div",E,[n("div",N,[n("div",z,[n("div",R,[n("img",{class:"login_panel_form_title_logo",src:a.$GIN_VUE_ADMIN.appLogo,alt:""},null,8,A),n("p",P,d(a.$GIN_VUE_ADMIN.appName),1)]),c(g,{ref_key:"loginForm",ref:L,model:U,rules:C,"validate-on-rule-change":!1,onKeyup:u(B,["enter"])},{default:p((()=>[c(l,{prop:"username"},{default:p((()=>[c(t,{modelValue:U.username,"onUpdate:modelValue":e[0]||(e[0]=a=>U.username=a),size:"large",placeholder:"请输入用户名","suffix-icon":"user"},null,8,["modelValue"])])),_:1}),c(l,{prop:"password"},{default:p((()=>[c(t,{modelValue:U.password,"onUpdate:modelValue":e[1]||(e[1]=a=>U.password=a),"show-password":"",size:"large",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),U.openCaptcha?(i(),h(l,{key:0,prop:"captcha"},{default:p((()=>[n("div",$,[c(t,{modelValue:U.captcha,"onUpdate:modelValue":e[2]||(e[2]=a=>U.captcha=a),placeholder:"请输入验证码",size:"large",style:{flex:"1","padding-right":"20px"}},null,8,["modelValue"]),n("div",q,[V.value?(i(),o("img",{key:0,src:V.value,alt:"请输入验证码",onClick:e[3]||(e[3]=a=>b())},null,8,D)):f("",!0)])])])),_:1})):f("",!0),c(l,null,{default:p((()=>[c(m,{type:"primary",style:{width:"46%"},size:"large",onClick:F},{default:p((()=>[_("前往初始化")])),_:1}),c(m,{type:"primary",size:"large",style:{width:"46%","margin-left":"8%"},onClick:B},{default:p((()=>[_("登 录")])),_:1})])),_:1})])),_:1},8,["model","rules","onKeyup"])]),G,n("div",K,[M,n("div",O,[c(I)])])])])}}}),[["__scopeId","data-v-1819488d"]]);export{F as default};
