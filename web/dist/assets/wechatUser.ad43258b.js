/*! 
 Build based on gin-vue-admin 
 Time : 1680141068000 */
import{r as e,a,o as l,c as t,d as o,e as d,w as i,h as s,aE as u,a3 as r,J as n,U as p,aC as c,a0 as m,bm as v,j as f,E as b,b as g}from"./index.9fcd1cf4.js";import{E as h}from"./dialog.751eac14.js";import"./overlay.a3adf688.js";/* empty css              */import"./tag.591c2959.js";import{E as y,a as j}from"./select.838f2837.js";import"./scrollbar.aed9ef7e.js";/* empty css               */import{E as w}from"./pagination.08bdb986.js";import{E as _,a as V}from"./table-column.1a5fcc4c.js";import"./checkbox.fecdbd3c.js";/* empty css                */import{E as C}from"./popover.80fb9c79.js";import{E as k,a as x}from"./form-item.d732c3ca.js";/* empty css               */import{E as U}from"./date-picker.d984416c.js";import{g as E,d as z,f as D,a as A,c as I,u as S}from"./wechatUser.555df466.js";import{f as T,a as B,g as K}from"./format.9eacff27.js";import"./refs.432de9a6.js";import"./index.bb4181cc.js";import"./index.7c6e002b.js";import"./strings.bddfd219.js";import"./isEqual.06eb6a45.js";import"./_Uint8Array.660aa69b.js";import"./_initCloneObject.a1ac0bc9.js";import"./dropdown.a2cc243e.js";import"./arrays.6dddb988.js";import"./index.34201737.js";import"./date.34b11046.js";import"./dictionary.888f6128.js";import"./dictionary.3924a9ed.js";import"./sysDictionary.8f2d31b8.js";const O={class:"gva-search-box"},q={class:"gva-table-box"},F={class:"gva-btn-list"},J=o("p",null,"确定要删除吗？",-1),R={style:{"text-align":"right","margin-top":"8px"}},W={class:"gva-pagination"},G={class:"dialog-footer"},H={name:"WechatUser"},L=Object.assign(H,{setup(H){const L=e([]),M=e({openid:"",unionid:"",name:"",phone:"",address:"",status:void 0}),N=a({}),P=e(),Q=e(1),X=e(0),Y=e(10),Z=e([]),$=e({}),ee=()=>{$.value={},oe()},ae=()=>{Q.value=1,Y.value=10,oe()},le=e=>{Y.value=e,oe()},te=e=>{Q.value=e,oe()},oe=async()=>{const e=await E({page:Q.value,pageSize:Y.value,...$.value});0===e.code&&(Z.value=e.data.list,X.value=e.data.total,Q.value=e.data.page,Y.value=e.data.pageSize)};oe();(async()=>{L.value=await K("status")})();const de=e([]),ie=e=>{de.value=e},se=e(!1),ue=async()=>{const e=[];if(0===de.value.length)return void f({type:"warning",message:"请选择要删除的数据"});de.value&&de.value.map((a=>{e.push(a.ID)}));0===(await z({ids:e})).code&&(f({type:"success",message:"删除成功"}),Z.value.length===e.length&&Q.value>1&&Q.value--,se.value=!1,oe())},re=e(""),ne=async e=>{0===(await A({ID:e.ID})).code&&(f({type:"success",message:"删除成功"}),1===Z.value.length&&Q.value>1&&Q.value--,oe())},pe=e(!1),ce=()=>{re.value="create",pe.value=!0},me=()=>{pe.value=!1,M.value={openid:"",unionid:"",name:"",phone:"",address:"",status:void 0}},ve=async()=>{var e;null==(e=P.value)||e.validate((async e=>{if(!e)return;let a;switch(re.value){case"create":default:a=await I(M.value);break;case"update":a=await S(M.value)}0===a.code&&(f({type:"success",message:"创建/更改成功"}),me(),oe())}))};return(e,a)=>{const f=U,E=k,z=b,A=x,I=C,S=_,K=V,H=w,oe=g,fe=y,be=j,ge=h;return l(),t("div",null,[o("div",O,[d(A,{inline:!0,model:$.value,class:"demo-form-inline",onKeyup:u(ae,["enter"])},{default:i((()=>[d(E,{label:"创建时间"},{default:i((()=>[d(f,{modelValue:$.value.startCreatedAt,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),s(" — "),d(f,{modelValue:$.value.endCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>$.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),d(E,null,{default:i((()=>[d(z,{type:"primary",icon:"search",onClick:ae},{default:i((()=>[s("查询")])),_:1}),d(z,{icon:"refresh",onClick:ee},{default:i((()=>[s("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),o("div",q,[o("div",F,[d(z,{type:"primary",icon:"plus",onClick:ce},{default:i((()=>[s("新增")])),_:1}),d(I,{visible:se.value,"onUpdate:visible":a[4]||(a[4]=e=>se.value=e),placement:"top",width:"160"},{reference:i((()=>[d(z,{icon:"delete",style:{"margin-left":"10px"},disabled:!de.value.length,onClick:a[3]||(a[3]=e=>se.value=!0)},{default:i((()=>[s("删除")])),_:1},8,["disabled"])])),default:i((()=>[J,o("div",R,[d(z,{type:"primary",link:"",onClick:a[2]||(a[2]=e=>se.value=!1)},{default:i((()=>[s("取消")])),_:1}),d(z,{type:"primary",onClick:ue},{default:i((()=>[s("确定")])),_:1})])])),_:1},8,["visible"])]),d(K,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:Z.value,"row-key":"ID",onSelectionChange:ie},{default:i((()=>[d(S,{type:"selection",width:"55"}),d(S,{align:"left",label:"日期",width:"180"},{default:i((e=>[s(r(n(T)(e.row.CreatedAt)),1)])),_:1}),d(S,{align:"left",label:"openid",prop:"openid",width:"120"}),d(S,{align:"left",label:"unionid",prop:"unionid",width:"120"}),d(S,{align:"left",label:"姓名",prop:"name",width:"120"}),d(S,{align:"left",label:"电话",prop:"phone",width:"120"}),d(S,{align:"left",label:"地址",prop:"address",width:"120"}),d(S,{align:"left",label:"状态",prop:"status",width:"120"},{default:i((e=>[s(r(n(B)(e.row.status,L.value)),1)])),_:1}),d(S,{align:"left",label:"按钮组"},{default:i((e=>[d(z,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await D({ID:e.ID});re.value="update",0===a.code&&(M.value=a.data.rewechatUser,pe.value=!0)})(e.row)},{default:i((()=>[s("变更")])),_:2},1032,["onClick"]),d(z,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void v.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ne(l)}));var l}},{default:i((()=>[s("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",W,[d(H,{layout:"total, sizes, prev, pager, next, jumper","current-page":Q.value,"page-size":Y.value,"page-sizes":[10,30,50,100],total:X.value,onCurrentChange:te,onSizeChange:le},null,8,["current-page","page-size","total"])])]),d(ge,{modelValue:pe.value,"onUpdate:modelValue":a[11]||(a[11]=e=>pe.value=e),"before-close":me,title:"弹窗操作"},{footer:i((()=>[o("div",G,[d(z,{onClick:me},{default:i((()=>[s("取 消")])),_:1}),d(z,{type:"primary",onClick:ve},{default:i((()=>[s("确 定")])),_:1})])])),default:i((()=>[d(A,{model:M.value,"label-position":"right",ref_key:"elFormRef",ref:P,rules:N,"label-width":"80px"},{default:i((()=>[d(E,{label:"openid:",prop:"openid"},{default:i((()=>[d(oe,{modelValue:M.value.openid,"onUpdate:modelValue":a[5]||(a[5]=e=>M.value.openid=e),clearable:!1,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"unionid:",prop:"unionid"},{default:i((()=>[d(oe,{modelValue:M.value.unionid,"onUpdate:modelValue":a[6]||(a[6]=e=>M.value.unionid=e),clearable:!1,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"姓名:",prop:"name"},{default:i((()=>[d(oe,{modelValue:M.value.name,"onUpdate:modelValue":a[7]||(a[7]=e=>M.value.name=e),clearable:!1,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"电话:",prop:"phone"},{default:i((()=>[d(oe,{modelValue:M.value.phone,"onUpdate:modelValue":a[8]||(a[8]=e=>M.value.phone=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"地址:",prop:"address"},{default:i((()=>[d(oe,{modelValue:M.value.address,"onUpdate:modelValue":a[9]||(a[9]=e=>M.value.address=e),clearable:!1,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"状态:",prop:"status"},{default:i((()=>[d(be,{modelValue:M.value.status,"onUpdate:modelValue":a[10]||(a[10]=e=>M.value.status=e),placeholder:"请选择",style:{width:"100%"},clearable:!1},{default:i((()=>[(l(!0),t(p,null,c(L.value,((e,a)=>(l(),m(fe,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{L as default};
